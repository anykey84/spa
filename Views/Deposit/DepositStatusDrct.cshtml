<div ng-init="showFormAdd; typeStatusRus = ''">

    <legend>статусы договора</legend>

    <div ng-show="processing['addStatus']
               || processing['delStatus']
               || processing['loadStatuses']">

        <my-progressbar message="{{message}}"
                        visible="true"
                        typebar="line" />
        <br />
    </div>

    <div>
        <my-servermessages messages="messages" />
    </div>

    <div ng-show="VisibleButtonStatusClose">
        <div>
            <button class="btn btn-primary btn-sm" ng-click="showFormAdd = true; status.typeStatus = 'close'; typeStatusRus = 'закрыть'">
                закрыть
            </button>
        </div>
        <br />
    </div>

    <div ng-show="VisibleButtonStatusInSB">
        <div>
            <button class="btn btn-primary btn-sm" ng-click="showFormAdd = true; status.typeStatus = 'insb'; typeStatusRus = 'на проверку в СБ'">
                на проверку в СБ
            </button>
        </div>
        <br />
    </div>

    <div ng-show="VisibleButtonStatusCorrection">
        <div>
            <button class="btn btn-primary btn-sm" ng-click="showFormAdd = true; status.typeStatus = 'correction'; typeStatusRus = 'на корректировку'">
                на корректировку
            </button>
        </div>
        <br />
    </div>

    <div>
        <div>
            <button class="btn btn-primary btn-sm" ng-show="VisibleButtonStatusApproved" ng-click="showFormAdd = true; status.typeStatus = 'approved'; typeStatusRus = 'одобрено'">
                одобрено
            </button>
        </div>
        <br />
    </div>

    <div ng-show="VisibleButtonStatusOk">
        <div>
            <button class="btn btn-primary btn-sm" ng-click="showFormAdd = true; status.typeStatus = 'ok'; typeStatusRus = 'согласовать'">
                согласовать
            </button>
        </div>
        <br />
    </div>

    <div ng-show="VisibleButtonStatusCancel">
        <div>
            <button class="btn btn-primary btn-sm" ng-click="showFormAdd = true; status.typeStatus = 'cancel'; typeStatusRus = 'отказать'">
                отказать
            </button>
        </div>
        <br />
    </div>

    <div ng-show="showFormAdd">
        <div class="form-horizontal">
            <h4>будет установлен статус - {{typeStatusRus}}</h4>

            <div class="form-group">
                <label for="idcomment"
                       class="col-sm-2 control-label">коментарий</label>
                <div class="col-sm-10">
                    <input type="text" ng-model="status.comment"
                           class="form-control" id="idcomment" />
                </div>
            </div>

            <div class="form-group">
                <label for="idcommenttypes"
                       class="col-sm-2 control-label">тип комментария</label>
                <div class="col-sm-10">
                    <select ng-model="selected"
                            ng-change="commentTypeChanged(selected)"
                            ng-options="item as item.name for item in commenttypes"
                            class="form-control" id="idcommenttypes" />
                </div>
            </div>

        </div>
        <div>
            <div>
                <button class="btn btn-primary btn-sm" ng-click="showFormAdd = !showFormAdd;">отмена</button>
                <button class="btn btn-primary btn-sm" ng-click="showFormAdd = !showFormAdd; addStatus();">создать</button>
            </div>
        </div>
        <br />
        <br />
        <br />
    </div>



    <table class="table table-striped table-condensed table-hover">
        <thead>
        <th>Статус</th>
        <th>Дата создания</th>
        <th>Тип комментария</th>
        <th>Комментарий</th>
        <th>Инициатор</th>
        <th ng-show="VisibleButtonDeleteStatus">-</th>
        </thead>
        <tbody>
            <tr ng-repeat="item in statuses">
                <!--<td>{{item.id}}</td>-->
                <td>{{item.statusName}}</td>
                <td>{{item.dateCreate}}</td>
                <td>{{item.commentType}}</td>
                <td>{{item.comment}}</td>
                <td>{{item.userCreate}}</td>
                <td ng-show="VisibleButtonDeleteStatus">
                    <button class="btn btn-primary btn-sm" ng-click="delStatus(item.id)">удалить</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>
